<section class="section">
  <div class="container">
    <div class="columns is-centered has-text-centered">
      <h1 class="title">投稿者一覧</h1>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="columns is-multiline">
      <% @users.each do |user| %>
        <div class="column is-3">
          <div class="card">
            <div class="card-content">
              <div class="card-image">
                <figure class="image img-container-user-index">
                  <%= link_to user_path(user) do %>
                    <%= attachment_image_tag user, :profile_image, fallback: "image1.png", class: "is-rounded" %>
                  <% end %>
                </figure>
              </div>
            </div>
          
            <div class="card-content">
              <div class="media">
                <div class="media-content">
                  <div class="title is-4 ml-1">
                    <%= link_to user.username, user_path(user) %>
                  </div>
                </div>
              </div>
              <div class="content ml-1">
                投稿数：<%= user.recipes.count %></br>
                いいねされた数：
                <% user_recipes = user.recipes %> 
                <% likes_count = 0 %>
                <% user_recipes.each do |recipe| %>
                  <% likes_count += recipe.likes.count %>
                <% end %>
                <%= likes_count %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</section>